package tsy.test;

import java.util.ArrayList;
import java.util.List;

import nc.bs.extsys.plugin.dingtalk.OApiException;
import nc.bs.extsys.plugin.dingtalk.auth.AuthHelper;
import nc.bs.extsys.plugin.dingtalk.department.DepartmentHelper;
import nc.bs.extsys.plugin.dingtalk.user.UserHelper;
import nc.bs.logging.Logger;
import nc.vo.pub.BusinessException;

import org.apache.commons.lang.StringUtils;
import org.junit.Test;

import com.dingtalk.open.client.api.model.corp.CorpUser;
import com.dingtalk.open.client.api.model.corp.CorpUserDetail;
import com.dingtalk.open.client.api.model.corp.CorpUserList;
import com.dingtalk.open.client.api.model.corp.Department;

public class JTest {
	private List<CorpUserDetail> userDetails = new ArrayList<CorpUserDetail>();
	private int getUserDetailErrorTimes = 0;
	private int getUserDetailErrorTimesMax = 20;//123


	@Test
	public void deletedept() {
		long[] ids1 =
				new long[] {56099484L,56099485L,56100552L,56100571L,56100572L,56101211L,56102634L,56102635L,56102636L,56102638L,56102639L,56102640L,56103579L,56103602L,56103603L,56104713L,56104724L,56105744L,56105747L,56105748L,56106778L,56106785L,56107434L,56107435L,56107436L,56108571L,56108573L,56109699L,56109701L,56109715L,56110496L,56110497L,56110498L,56110499L,56110500L,56110501L,56110502L,56110503L,56111192L,56111194L,56111196L,56111197L,56111198L,56111199L,56111200L,56112520L,56112535L,56112537L,56113617L,56113629L,56113630L,56113631L,56114696L,56114697L,56114698L,56115708L,56115713L,56115715L,56116683L,56116684L,56117461L,56117462L,56117463L,56118495L,56118498L,56118511L,56118513L,56119582L,56119584L,56119585L,56120205L,56120206L,56120207L,56120208L,56121661L,56121662L,56121663L,56122678L,56123719L,56123720L,56123721L,56123722L,56124683L,56124694L,56124695L,56125732L,56125733L,56125734L,56126633L,56126634L,56127567L,56128485L,56129654L,56129655L,56129656L,56129658L,56129659L,56129661L,56129662L,56129663L,56130722L,56130723L,56130724L,56131725L,56132590L,56132601L,56132602L,56132603L,56132604L,56132605L,56132606L,56133465L,56133485L,56133487L,56133488L,56133489L,56134495L,56134496L,56134497L,56135487L,56135506L,56135507L,56135508L,56135509L,56136530L,56136538L,56137470L,56137485L,56137486L,56137487L,56138490L,56138504L,56138505L,56138506L,56138507L,56138508L,56138509L,56138510L,56139211L,56139213L,56139214L,56139215L,56140525L,56140533L,56140534L,56140535L,56140536L,56141611L,56142519L,56142521L,56142522L,56143192L,56143198L,56143199L,56144550L,56144560L,56144561L,56144562L,56144564L,56144565L,56145705L,56145715L,56146752L,56146755L,56146756L,56149743L,56149756L,56150686L,56150687L,56150688L,56151557L,56151572L,56151574L,56152585L,56152586L,56153597L,56153599L,56154871L,56154872L,56154873L,56155746L,56155747L,56156751L,56156752L,56157830L,56157831L,56158702L,56158712L,56158713L,56158714L,56158715L,56158716L,56159706L,56159710L,56159721L,56159722L,56160671L,56160672L,56160673L,56160674L,56161694L,56161711L,56161712L,56161713L,56162494L,56162495L,56162497L,56163745L,56163754L,56164692L,56164706L,56164708L,56164709L,56165614L,56165621L,56165623L,56165624L,56166219L,56166220L,56166224L,56167551L,56167552L,56167553L,56168516L,56168517L,56168519L,56169698L,56170769L,56171793L,56171794L,56172703L,56173706L,56173707L,56173708L,56173709L,56173710L,56173711L,56175472L,56175481L,56175482L,56175483L,56175484L,56176678L,56177673L,56177674L,56179796L,56179797L,56179799L,56180748L,56180749L,56180750L,56180751L,56180752L,56181725L,56181736L,56181737L,56181738L,56182537L,56182538L,56182539L,56184214L,56184215L,56184217L,56184218L,56184219L,56185486L,56185487L,56186543L,56186544L,56186545L,56187716L,56187718L,56187734L,56187735L,56187736L,56187737L,56187738L,56187739L,56188730L,56188731L,56188732L,56188733L,56189572L,56189585L,56189587L,56189589L,56189590L,56189591L,56189623L,56190690L,56190691L,56191549L,56191551L,56192495L,56193740L,56193741L,56193742L,56194686L,56194692L,56194693L,56194694L,56195681L,56195700L,56195701L,56196709L,56196716L,56196717L,56196718L,56196719L,56197715L,56197716L,56197717L,56197718L,56197719L,56197720L,56198672L,56198673L,56198674L,56198675L,56199707L,56199708L,56199709L,56200694L,56200705L,56200706L,56200707L,56201546L,56201547L,56201548L,56201549L,56202562L,56202574L,56202575L,56202577L,56203736L,56203737L,56203738L,56203739L,56203740L,56204747L,56204748L,56204749L,56204750L,56204751L,56205769L,56205770L,56206683L,56206700L,56206702L,56207830L,56207831L,56207835L,56207846L,56207847L,56207848L,56208719L,56208720L,56208721L,56209538L,56209540L,56209541L,56210659L,56210661L,56211596L,56211597L,56212798L,56212806L,56212807L,56212809L,56213497L,56213508L,56213509L,56213510L,56593142L,56602173L,56604138L,56605150L,56605151L,56608198L,56608199L,56612165L,56614190L,56615321L,56621159L,56621160L,56625048L,56625049L,56627155L,56628154L,56629157L,56630196L,56637148L,56640183L,56640184L,56641154L,56644147L,56645163L,56648129L,56656156L,56659138L,56664118L,56667261L,56669150L,56674147L,56677100L,56679126L,56680162L,56683160L,56692060L,56694169L,56695167L,56696167L,56699152L,56701159L,56707194L,56710121L,56711136L,56711137L,56712114L,56712116L,56715115L,56716116L,56722178L,56722181L,56723144L,56725033L,56729446L,56731148L,56732179L,56735044L,56736159L,56736181L,56737064L,56742115L};
		long[] ids2 =
				new long[] {47696366L,47703446L,49195909L,49426077L,50792462L,50792491L,50792493L,50792501L,50792502L,50792503L,50793379L,50793380L,50793381L,50793382L,50793383L,50793384L,50794366L,50794367L,50794385L,50794386L,50794388L,50795424L,50795426L,50795427L,50795428L,50795429L,50795430L,50795431L,50796369L,50796391L,50796392L,50797437L,50797438L,50797439L,50797440L,50797441L,50797442L,50797444L,50797446L,50797448L,50797451L,50797454L,50797455L,50797471L,50798458L,50798465L,50799449L,50799461L,50799462L,50799463L,50799464L,50799465L,50799477L,50799478L,50799479L,50800435L,50800459L,50800462L,50800463L,50800466L,50800468L,50800471L,50800473L,50800474L,50801398L,50801426L,50801430L,50801432L,50801435L,50801437L,50801441L,50801443L,50801444L,50801447L,50801448L,50801462L,50802438L,50802439L,50802476L,50802478L,50802480L,50802484L,50802486L,50802489L,50802501L,50802504L,50802507L,50803437L,50803470L,50803472L,50803478L,50803479L,50803481L,50803483L,50803484L,50803485L,50803488L,50803489L,50803490L,50804483L,50804493L,50805455L,50805457L,50805482L,50805488L,50805490L,50805492L,50805496L,50805499L,50805515L,50806407L,50806430L,50806431L,50806433L,50806435L,50806446L,50806449L,50806450L,50806454L,50806472L,50807438L,50807441L,50807443L,50807452L,50807458L,50807460L,50807461L,50808428L,50808431L,50808432L,50808438L,50808439L,50808442L,50809486L,50809487L,50809488L,50809494L,50809495L,50809498L,50809500L,50809515L,50809517L,50810438L,50810440L,50810441L,50810463L,50810464L,50810465L,50811479L,50811480L,50811481L,50811482L,50811485L,50811490L,50811493L,50811494L,50811496L,50811513L,50812396L,50812397L,50812432L,50812433L,50812434L,50812435L,50812438L,50812439L,50812446L,50812449L,50812450L,50812451L,50812453L,50812454L,50813454L,50813456L,50813459L,50813460L,50813464L,50813471L,50813485L,50814402L,50814446L,50814450L,50814453L,50814457L,50814461L,50814470L,50814473L,50815471L,50815489L,50816474L,50816478L,50816484L,50816502L,50816503L,50816504L,50816505L,50817440L,50817446L,50817450L,50817467L,50818369L,50818370L,50818401L,50818403L,50818404L,50818406L,50818434L,50819430L,50819475L,50819477L,50820451L,50820452L,50820453L,50820454L,50820456L,50820457L,50820459L,50820461L,50820466L,50820468L,50820470L,50820472L,50820485L,50821368L,50821390L,50821392L,50821393L,50821397L,50821402L,50822489L,50822494L,50822496L,50822499L,50823420L,50823422L,50823423L,50823424L,50823426L,50823427L,50823429L,50824350L,50825332L,50825333L,50825334L,50826372L,50827403L,50827404L,50828396L,50828397L,50828398L,50829405L,50829406L,50829407L,50830381L,50830382L,50830383L,50830384L,50830385L,50830387L,50830388L,50831409L,50831410L,50831412L,50832463L,50832484L,50832485L,50832486L,50833353L,50833354L,50833380L,50833381L,50833382L,50834402L,50834403L,50834404L,50835395L,50835396L,50835424L,50836346L,50836389L,50836390L,50836391L,50836392L,50836393L,50837328L,50837350L,50837351L,50837352L,50837353L,50837356L,50838372L,50838373L,50838374L,50838375L,50838376L,50839412L,50839413L,50839414L,50839415L,50839417L,50840412L,50840413L,50840416L,50840417L,50840418L,50841447L,50841448L,50841449L,50841451L,50841452L,50841453L,50841455L,50841456L,50841457L,50842328L,50842357L,50842359L,50842360L,50842361L,50842364L,50842365L,50843393L,50843394L,50844398L,50844399L,50844400L,50844401L,50844402L,50844405L,50844406L,50844407L,50845347L,50845348L,50845349L,50845350L,50845351L,50845352L,50845353L,50846379L,50846380L,50846401L,50846404L,50846405L,50846407L,50846408L,50846409L,50846410L,50846411L,50846412L,50846413L,50846414L,50846415L,50847386L,50847387L,50847388L,50847394L,50847395L,50847396L,50848368L,50848370L,50848371L,50848372L,50848374L,50849428L,50849430L,50849432L,50850359L,50850360L,50850361L,50850363L,50850364L,50851337L,50851360L,50851361L,50851362L,50851363L,50851364L,50851365L,50852459L,50852460L,50852461L,50852462L,50852464L,50852465L,50852466L,50853442L,50853443L,50853444L,50853445L,50853446L,50853447L,50853450L,50853451L,50854366L,50854385L,50854386L,50854389L,50854390L,50855436L,50855437L,50855438L,50855439L,50855440L,50855441L,50855442L,50856394L,50856395L,50856396L,50856397L,50856398L,50856400L,50856401L,50856404L,50856405L,50856406L,50857377L,50857398L,50857399L,50857400L,50857401L,50857402L,50857404L,50857405L,50857406L,50857408L,50858338L,50858339L,50858340L,50858341L,50859366L,50859367L,50859397L,50859398L,50860359L,50860360L,50860361L,50861375L,50861376L,50861377L,50861378L,50862391L,50862392L,50862393L,50862396L,50862397L,50862398L,50862399L,50862400L,50863347L,50863348L,50863365L,50863366L,50863368L,50864363L,50864364L,50864394L,50864397L,50864402L,50864408L,50864409L,50864410L,50864427L,50864428L,50865368L,50865372L,50866411L,50866412L,50866415L,50866416L,50866417L,50867399L,50867423L,50867426L,50867427L,50867428L,50867429L,50867432L,50868501L,50868503L,50868504L,50868506L,50868510L,50868518L,50869440L,50869468L,50869469L,50869474L,50869483L,50870432L,50870434L,50870445L,50870447L,50871460L,50871461L,50871466L,50871468L,50871469L,50871475L,50871479L,50872449L,50872452L,50872453L,50872457L,50872458L,50872460L,50872463L,50872464L,50872466L,50872467L,50872469L,50872472L,50873499L,50873500L,50873506L,50873509L,50873513L,50873514L,50873524L,50873525L,50874387L,50874425L,50874429L,50874433L,50874434L,50874435L,50874436L,50874438L,50874449L,50875464L,50875468L,50875474L,50875477L,50875485L,50875486L,50875487L,50875488L,50876429L,50876459L,50876461L,50876462L,50876465L,50876467L,50876468L,50876471L,50876473L,50876483L,50877441L,50877475L,50877479L,50877480L,50877483L,50877490L,50877491L,50878464L,50878465L,50878502L,50878509L,50878511L,50878512L,50878514L,50878515L,50878518L,50878531L,50879457L,50879459L,50879460L,50879462L,50879463L,50879465L,50879480L,50879481L,50880469L,50880475L,50880482L,50880487L,50880504L,50881501L,50881502L,50881503L,50881513L,50881516L,50881517L,50882457L,50882494L,50882502L,50882503L,50882507L,50882508L,50882514L,50883472L,50883475L,50883477L,50883484L,50883487L,50884402L,50884434L,50884435L,50884450L,50884451L,50884452L,50884455L,50885444L,50885445L,50885507L,50885508L,50885509L,50885538L,50886488L,50886489L,50886503L,50886504L,50886517L,50886519L,50886559L,50887456L,50887457L,50887501L,50887504L,50887505L,50887507L,50887509L,50887513L,50887521L,50887522L,50888520L,50888526L,50888533L,50888534L,50888537L,50888559L,51143517L,51215181L,51235029L,53456627L,53503602L,53555468L,56084681L,56084697L,56084698L,56084699L,56084700L,56085573L,56085585L,56085586L,56086480L,56086504L,56086505L,56086506L,56087558L,56087560L,56088544L,56088546L,56088547L,56089646L,56089667L,56089668L,56090750L,56090751L,56091698L,56091699L,56091700L,56091701L,56092708L,56092709L,56093658L,56093676L,56093678L,56094610L,56095553L,56095566L,56095567L,56096703L,56096704L,56097544L,56097556L,56097557L,56097558L,56098480L,56099481L,56099482L,56099483L};
//		long[] ids3 =
//				new long[] { 49443051L, 49444070L, 49445025L, 49445026L, 49445053L, 49445054L, 49445055L, 49445056L, 49446040L, 49446056L, 49447032L, 49447039L, 49447062L, 49447064L, 49448045L, 49449022L, 49449023L, 49449024L, 49449053L, 49449055L, 49449057L, 49450022L, 49450023L, 49450024L, 49450025L, 49450028L, 49450054L, 49450055L, 49451031L, 49451064L, 49452024L, 49452025L, 49452048L, 49453023L, 49453026L, 49453027L, 49453057L, 49453059L, 49454024L, 49454025L, 49454026L, 49454027L, 49454083L, 49454084L, 49454085L, 49455018L, 49455021L, 49455037L, 49455041L, 49455051L, 49455053L, 49455056L, 49456049L, 49456051L, 49457020L, 49457039L, 49457042L, 49457044L, 49457045L, 49458008L, 49458009L, 49458014L, 49458016L, 49459009L, 49459012L, 49459036L, 49459037L, 49460010L, 49460012L, 49460014L, 49460015L, 49460016L, 49460017L, 49460018L, 49461003L, 49461005L, 49461028L, 49461032L, 49462001L, 49462030L, 49463001L, 49464001L, 49464025L, 49465037L, 49466024L, 49466025L, 49467025L, 49467026L, 49469025L, 49469026L, 49470008L, 49470009L, 49471007L, 49471010L, 49471011L, 49471012L, 49471013L, 49472011L, 49472012L, 49473003L, 49965333L, 50238431L };
//		long[] ids4 =
//				new long[] { 49271716L, 49271717L, 49271718L, 49271838L, 49271839L, 49271840L, 49271842L, 49272899L, 49272900L, 49272901L, 49272902L, 49272903L, 49272904L, 49272905L, 49272995L, 49272996L, 49272997L, 49272998L, 49272999L, 49273000L, 49273686L, 49273784L, 49273785L, 49273787L, 49275689L, 49275690L, 49275691L, 49275692L, 49275840L, 49275841L, 49276812L, 49276813L, 49276815L, 49277711L, 49277712L, 49277713L, 49277859L, 49277860L, 49278762L, 49278763L, 49278764L, 49278765L, 49278766L, 49278917L, 49279885L, 49279886L, 49279887L, 49279889L, 49279890L, 49279891L, 49279892L, 49279893L, 49279995L, 49279996L, 49280690L, 49280691L, 49280693L, 49280694L, 49280695L, 49280696L, 49280697L, 49280871L, 49281819L, 49281820L, 49281822L, 49281823L, 49281824L, 49281825L, 49281921L, 49282842L, 49282843L, 49282844L, 49282845L, 49282846L, 49282847L, 49282849L, 49282850L, 49282851L, 49282852L, 49282853L, 49282935L, 49282936L, 49283958L, 49283959L, 49283960L, 49283961L, 49284837L, 49284838L, 49284839L, 49284841L, 49284954L, 49284955L, 49285914L, 49285915L, 49286710L, 49286711L, 49286712L, 49286713L, 49286862L, 49286864L, 49286865L, 49286866L, 49287867L, 49287868L, 49287869L, 49287870L, 49287871L, 49288685L, 49288686L, 49288687L, 49288689L, 49288794L, 49289770L, 49289771L, 49289772L, 49289773L, 49289774L, 49289775L, 49289776L, 49289777L, 49289778L, 49289779L, 49289952L, 49289953L, 49290795L, 49290796L, 49290797L, 49290798L, 49290799L, 49290800L, 49290801L, 49290802L, 49290899L, 49290900L, 49290901L, 49290902L, 49292848L, 49292849L, 49292851L, 49292853L, 49292975L, 49294799L, 49294800L, 49294801L, 49294802L, 49294803L, 49294804L, 49294805L, 49294806L, 49294919L, 49294920L, 49294921L, 49294922L, 49295827L, 49295828L, 49295829L, 49295830L, 49295831L, 49295832L, 49295833L, 49295834L, 49295835L, 49295836L, 49295838L, 49295839L, 49295840L, 49295973L, 49296746L, 49296747L, 49296748L, 49296749L, 49296750L, 49296751L, 49296752L, 49296753L, 49296754L, 49296755L, 49296855L, 49296856L, 49296857L, 49297713L, 49297715L, 49297716L, 49297717L, 49297826L, 49297827L, 49297828L };
//		long[] ids5 =
//				new long[] { 49298694L, 49298695L, 49298697L, 49298698L, 49298699L, 49299795L, 49299796L, 49299797L, 49299798L, 49299928L, 49299929L, 49300798L, 49300799L, 49300800L, 49300897L, 49300899L, 49301795L, 49301796L, 49301797L, 49301798L, 49301799L, 49301800L, 49301801L, 49301804L, 49301805L, 49301898L, 49301903L, 49302767L, 49302768L, 49302769L, 49302770L, 49302771L, 49302772L, 49302876L, 49302877L, 49302878L, 49303793L, 49303794L, 49303795L, 49303796L, 49303797L, 49303798L, 49303799L, 49303898L, 49303899L, 49303900L, 49303901L, 49303902L, 49304830L, 49304831L, 49304833L, 49304834L, 49304835L, 49304837L, 49304838L, 49304840L, 49304841L, 49304842L, 49304843L, 49304844L, 49304847L, 49304934L, 49304935L, 49305922L, 49305923L, 49305924L, 49305925L, 49305927L, 49305928L, 49305929L, 49305930L, 49305931L, 49305932L, 49305933L, 49307746L, 49307747L, 49307748L, 49307749L, 49307750L, 49307860L, 49307861L, 49307862L, 49307863L, 49307864L, 49308929L, 49308930L, 49308931L, 49308932L, 49308933L, 49308934L, 49308935L, 49308936L, 49309810L, 49309811L, 49309812L, 49309816L, 49309817L, 49309818L, 49309908L, 49309909L, 49309910L, 49309911L, 49312887L, 49312889L, 49312890L, 49312891L, 49313000L, 49314003L, 49342138L, 49342139L, 49342140L, 49342141L, 49342142L, 49342143L, 49342144L, 49342145L, 49342146L, 49342147L, 49342256L, 49342257L, 49342258L, 49347051L, 49347052L, 49347053L, 49347054L, 49347055L, 49347058L, 49347059L, 49347060L, 49347183L, 49347184L, 49347185L, 49347186L, 49350042L, 49350043L, 49350044L, 49350045L, 49350046L, 49350047L, 49350048L, 49350049L, 49350050L, 49350153L, 49350154L, 49350155L, 49350156L, 49350157L, 49350158L, 49350159L, 49351049L, 49351050L, 49351051L, 49351052L, 49351053L, 49351054L, 49351055L, 49351056L, 49351057L, 49351175L, 49351176L, 49354102L, 49354103L, 49354104L, 49354105L, 49354106L, 49354107L, 49354108L, 49354109L, 49354110L, 49354111L, 49354112L, 49354233L, 49354234L, 49354235L, 49356017L, 49356018L, 49356019L, 49356020L, 49356021L, 49356022L, 49356023L, 49356024L, 49356025L, 49356026L, 49356027L, 49356028L, 49356029L, 49356030L, 49356031L, 49356139L, 49357018L, 49357019L, 49357020L, 49357021L, 49357023L, 49357024L, 49357025L, 49357026L, 49357124L, 49357125L, 49357126L, 49357127L, 49357128L, 49358001L, 49358002L, 49358003L, 49358004L, 49358005L, 49358007L, 49358147L, 49358148L, 49358149L, 49361091L, 49363076L, 49363077L, 49363078L, 49363079L, 49366055L, 49366056L, 49370098L, 49370099L, 49370100L, 49370101L, 49400050L, 49400051L, 49400052L, 49401042L, 49401043L, 49401044L, 49401045L, 49402041L, 49402042L, 49402043L, 49402044L, 49403031L, 49403032L, 49404022L, 49404023L, 49404024L, 49404025L, 49405029L, 49405030L, 49405031L, 49406024L, 49406025L, 49407111L, 49408012L, 49408013L, 49409041L, 49409042L, 49409043L, 49410001L, 49411001L };
		for (long id : ids1) {
			try {
				DepartmentHelper.deleteDepartment(AuthHelper.getAccessToken(), id);
			} catch (OApiException e) {
				e.printStackTrace();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
		for (long id : ids2) {
			try {
				DepartmentHelper.deleteDepartment(AuthHelper.getAccessToken(), id);
			} catch (OApiException e) {
				e.printStackTrace();
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
//		for (long id : ids3) {
//			try {
//				DepartmentHelper.deleteDepartment(AuthHelper.getAccessToken(), id);
//			} catch (OApiException e) {
//				e.printStackTrace();
//			} catch (Exception e) {
//				e.printStackTrace();
//			}
//		}
		//		for (long id : ids4) {
		//			try {
		//				DepartmentHelper.deleteDepartment(AuthHelper.getAccessToken(), id);
		//			} catch (OApiException e) {
		//				e.printStackTrace();
		//			} catch (Exception e) {
		//				e.printStackTrace();
		//			}
		//		}
		//		for (long id : ids5) {
		//			try {
		//				DepartmentHelper.deleteDepartment(AuthHelper.getAccessToken(), id);
		//			} catch (OApiException e) {
		//				e.printStackTrace();
		//			} catch (Exception e) {
		//				e.printStackTrace();
		//			}
		//		}
	}

	@Test
	public void getUser() throws BusinessException {
		//		List<CorpUserDetail> userList = getAllUser();
		List<String> list = new ArrayList<String>();
		list.add("aaa");
		list.add("bbb");
		list.add("ccc");

		List<String> list1 = new ArrayList<String>();
		list1.add("ddd");
		list1.add("eee");
		list.addAll(list1);
		list1.clear();

		System.out.println(list);
	}

	private List<CorpUserDetail> getAllUser() throws BusinessException {
		if (this.userDetails != null && this.userDetails.size() > 0) {
			return this.userDetails;
		}
		try {
			List<Department> departments = DepartmentHelper.listDepartments(AuthHelper.getAccessToken(), "1");
			for (int i = 0; i < departments.size(); i++) {
				CorpUserList corpuserlist =
						UserHelper.getDepartmentUser(AuthHelper.getAccessToken(), departments.get(i).getId(), null, null, null);
				List<CorpUser> userlist = corpuserlist.getUserlist();
				for (int j = 0; j < userlist.size(); j++) {
					this.userDetails.add(UserHelper.getUser(AuthHelper.getAccessToken(), userlist.get(j).getUserid()));
				}
			}
		} catch (Exception e) {
			this.getUserDetailErrorTimes++;
			if (this.getUserDetailErrorTimes < this.getUserDetailErrorTimesMax) {
				this.userDetails.clear();
				try {
					Thread.sleep(3000L);
				} catch (InterruptedException e1) {
					Logger.error(e1);
				}
				return getAllUser();
			} else {
				throw new BusinessException(e);
			}
		}
		return this.userDetails;
	}
	
	@Test
	public void testString(){
		Object str = null;
		System.out.println(StringUtils.isNotBlank((String)str));
	}
}
